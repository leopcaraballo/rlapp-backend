# RLAPP Environment Configuration Template
# Copy to .env and modify for your environment

# =========================================
# PostgreSQL Configuration
# =========================================
POSTGRES_USER=rlapp
POSTGRES_PASSWORD=rlapp_secure_password
POSTGRES_INITDB_ARGS=-c max_connections=200
POSTGRES_DB=waitingroom_eventstore

# Event Store Connection String
EventStore__ConnectionString=Host=postgres;Port=5432;Database=waitingroom_eventstore;Username=rlapp;Password=rlapp_secure_password

# Read Models Connection String (for projections)
ReadModels__ConnectionString=Host=postgres;Port=5432;Database=waitingroom_read_models;Username=rlapp;Password=rlapp_secure_password

# =========================================
# RabbitMQ Configuration
# =========================================
RabbitMq__HostName=rabbitmq
RabbitMq__Port=5672
RabbitMq__UserName=guest
RabbitMq__Password=guest
RabbitMq__VirtualHost=/
RabbitMq__ExchangeName=waiting_room_events
RabbitMq__ExchangeType=topic

# =========================================
# Outbox Dispatcher Configuration
# =========================================
OutboxDispatcher__PollingIntervalSeconds=5
OutboxDispatcher__BatchSize=100
OutboxDispatcher__MaxRetryAttempts=5
OutboxDispatcher__BaseRetryDelaySeconds=30
OutboxDispatcher__MaxRetryDelaySeconds=3600

# =========================================
# Logging Configuration
# =========================================
Logging__LogLevel__Default=Information
Logging__LogLevel__Microsoft.Hosting.Lifetime=Information
Logging__LogLevel__WaitingRoom=Debug

Serilog__MinimumLevel=Information
Serilog__WriteTo__0__Name=Console
Serilog__WriteTo__1__Name=Seq
Serilog__WriteTo__1__Args__serverUrl=http://seq:5341

# =========================================
# Seq (Structured Logging)
# =========================================
Seq__Url=http://seq:5341
Seq__ApiKey=

# =========================================
# Prometheus / Grafana
# =========================================
Prometheus__ScrapeInterval=15s
Prometheus__EvaluationInterval=15s

Grafana__AdminUser=admin
Grafana__AdminPassword=admin123
Grafana__Plugins=grafana-clock-panel,grafana-simple-json-datasource

# =========================================
# Application Configuration
# =========================================
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=http://+:5000

# Correlation ID for request tracing
CorrelationId__Enabled=true
CorrelationId__HeaderName=X-Correlation-Id

# =========================================
# Observability
# =========================================
# Event lag tracking
EventLagTracking__Enabled=true
EventLagTracking__StorageInterval=5s

# Health checks
HealthChecks__Enabled=true
HealthChecks__Path=/health
HealthChecks__Detailed=true

# =========================================
# Feature Flags
# =========================================
Features__ProjectionsEnabled=true
Features__OutboxDispatcherEnabled=true
Features__LagMonitoringEnabled=true
Features__HealthChecksEnabled=true

# =========================================
# Performance Tuning
# =========================================
# Connection pooling
ConnectionPool__MaxSize=200
ConnectionPool__MinSize=10

# Event batch processing
EventProcessing__BatchSize=100
EventProcessing__TimeoutSeconds=30

# Projection rebuild settings
Projections__RebuildTimeout=300
Projections__MaxCheckpointLag=30000
